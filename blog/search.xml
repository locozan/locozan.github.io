<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[实现移动端的下拉刷新]]></title>
      <url>/blog/2016/12/11/%E5%AE%9E%E7%8E%B0%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0/</url>
      <content type="html"><![CDATA[<p>周日难得休息，玩内涵看到这样的一个下拉刷新挺有意思的：</p>
<p><img src="/images/dropDowncurve/curve.gif" alt=""></p>
<p>就随手仿码了下，而且代码很简单，实现的功能却很实用。</p>
<a id="more"></a>
<h2 id="需求与实现原理"><a href="#需求与实现原理" class="headerlink" title="需求与实现原理"></a>需求与实现原理</h2><p>把代码封装成一个通用函数，可以适用于各种手机页面需要下拉更新；当下拉结束时，触发一个回调函数；并且该函数 return 一个 destroy 方法用于清除该函数的所有事件；其中主要用到两方面知识：</p>
<ol>
<li>手机的三个事件：<br><code>touchstart  touchmove  touchend</code> </li>
<li>SVG 路径 path 的贝塞尔曲线</li>
</ol>
<h3 id="手机的三个事件："><a href="#手机的三个事件：" class="headerlink" title="手机的三个事件："></a>手机的三个事件：</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> startX = startY = endX = endY = <span class="number">0</span>;</div><div class="line"><span class="comment">//touchStart事件</span></div><div class="line">    bodys.addEventListener(<span class="string">'touchstart'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">      <span class="keyword">let</span> touch = event.targetTouches[<span class="number">0</span>];</div><div class="line">      startX = touch.pageX;</div><div class="line">      startY = touch.pageY;</div><div class="line">   </div><div class="line">    &#125;,<span class="literal">false</span>);</div><div class="line"><span class="comment">//touchmove事件</span></div><div class="line">    bodys.addEventListener(<span class="string">'touchmove'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">      <span class="keyword">let</span> touch = event.targetTouches[<span class="number">0</span>];</div><div class="line">      endX = touch.pageX;</div><div class="line">      endY = touch.pageY;</div><div class="line">      </div><div class="line">    &#125;,<span class="literal">false</span>);</div><div class="line"><span class="comment">//touchend事件</span></div><div class="line">    bodys.addEventListener(<span class="string">'touchend'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line"></div><div class="line">    &#125;,<span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>这里我是把事件绑定到 bodys 上面；这样就不会影响到 body 里的所有东西；用 touch 对象中的 pageX和 pageY 属性可以计算手指移动距离；想了解更多可以去看 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Touch" target="_blank" rel="external">Touch属性介绍</a></p>
<h3 id="SVG-路径-path-的贝塞尔曲线"><a href="#SVG-路径-path-的贝塞尔曲线" class="headerlink" title="SVG 路径 path 的贝塞尔曲线"></a>SVG 路径 path 的贝塞尔曲线</h3><p>这里先介绍下三次贝塞尔曲线指令，而曲线格式是：<br><code>C x1,y1 x2,y2 x,y</code><br>其中：</p>
<ul>
<li>x1,y1 是曲线起点的控制点坐标</li>
<li>x2,y2 是曲线终点的控制点坐标</li>
<li>x,y 是曲线的终点坐标</li>
</ul>
<p>也就是这样：<br><img src="/images/dropDowncurve/quxian.png" alt=""><br>如果想了解更多可以查看张鑫旭的 <a href="http://www.zhangxinxu.com/wordpress/2014/06/deep-understand-svg-path-bezier-curves-command/" target="_blank" rel="external">深度掌握SVG路径path的贝塞尔曲线指令</a></p>
<p>实现代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;svg width=<span class="string">"$&#123; screenWidth &#125;"</span> height=<span class="string">"$&#123; height &#125;"</span>&gt;</div><div class="line">    &lt;path d="M 0,0 C 0,0 $&#123; screenWidth / 4 &#125;,$&#123; height &#125; $&#123; screenWidth / 2 &#125;,$&#123; height &#125; C $&#123; screenWidth * .75 &#125;,$&#123; height &#125; $&#123; screenWidth &#125;,0 $&#123; screenWidth &#125;,0" stroke="#000000" fill="none" style="stroke-width: 2px;"&gt;</div><div class="line">    &lt;/path&gt;</div><div class="line">&lt;<span class="regexp">/svg&gt;</span></div></pre></td></tr></table></figure>
<p>代码中我们用到指令 M：路径起始点坐标，然后通过 C 定义一个起点和终点，以及两个控制点（一个控制起点，一个控制终点），绘制一条贝塞尔曲线；这里我的曲线是通过两个 C 来绘制的；其中 screenWidth 是我获取到的屏幕的宽度，height 是事件触发时，手指下拉的距离。这样下拉一条曲线就出来了，当然不用 C 指令也是可以的，那就是用二次贝塞尔曲线 Q，它比三次贝塞尔曲线简单，只需要一个控制点，用来确定起点和终点的曲线斜率。因此它需要两组参数，控制点和终点坐标</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;path d=<span class="string">"M0,0 Q 200,'+Math.abs(as) * 2+' '+ screenWidth +',0"</span> stroke=<span class="string">"#000000"</span> fill=<span class="string">"none"</span> style=<span class="string">"stroke-width: 2px;"</span>&gt;&lt;/path&gt;</div></pre></td></tr></table></figure>
<p>这样也是能达到我们要实现的效果；<br>具体代码可以看我作品里 <a href="/writing/dropDowncurve/index.html">手机下拉刷新</a>; 请手机扫码看效果哦！<img src="/images/dropDowncurve/code.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[高仿PS选区的流水虚线框]]></title>
      <url>/blog/2016/12/06/%E9%AB%98%E4%BB%BFPS%E9%80%89%E5%8C%BA%E7%9A%84%E6%B5%81%E6%B0%B4%E8%99%9A%E7%BA%BF%E6%A1%86/</url>
      <content type="html"><![CDATA[<p>今天无意中看到以下的这样一张动态虚线框的图：<br><img src="/images/dashed-img/liushuikuang.gif" alt=""><br>感觉这动态虚线挺有意思的，就研究实现了下：<br><a href="/images/dashed-img/index.html">demo</a></p>
<a id="more"></a>
<p>这效果其实跟我们的绘图工具 Photoshop 里的矩形选框工具画出矩形时是一样的，</p>
<p><img src="/images/dashed-img/dashed%EF%BC%8D0.png" alt=""></p>
<p>而实现这功能不用 js，只要用到 css 中的 <a href="http://www.css88.com/book/css/properties/border/border-image.htm" target="_blank" rel="external">border-image</a> 就可以了；</p>
<p>前提要做一个 gif 动画，像这样：</p>
<p><img src="/images/dashed-img/dashed.gif" alt=""></p>
<p>当然这动画用 PS 做在导出就可以了；<br>首先在 PS 里先画一张图：</p>
<p><img src="/images/dashed-img/dashed%EF%BC%8D2.png" alt=""></p>
<p>然后拷贝一个区，选中复制几张下来，设定成一个动画：</p>
<p><img src="/images/dashed-img/dashed%EF%BC%8D1.png" alt=""></p>
<p>最后这动画导出 gif 格式的图片，在转换成 Base64 编码；<br>最后写入你 html 创建的 div 的css样式中：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">  .box&#123;</div><div class="line">    width: 800px;</div><div class="line">    height: 400px;</div><div class="line">    border: 1px solid gray;</div><div class="line">    border-image: url(data:image/gif;base64,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) 1/1px repeat;</div><div class="line">  &#125;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<p>这样就不用引一个外部图片，而且实现了任意大小的 div 都有流水虚线框的效果。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[文章高亮]]></title>
      <url>/blog/2016/11/26/%E6%96%87%E7%AB%A0%E9%AB%98%E4%BA%AE/</url>
      <content type="html"><![CDATA[<p>前两天兴兴的写了个 <a href="/blog/2016/11/24/%E6%89%BE%E5%87%BA%E6%96%87%E7%AB%A0%E9%87%8D%E5%A4%8D%E5%AD%97/">文章的重复字</a> 功能，然后觉得挺有意思的就在继续的加深下去，在找出了文章的重复字后，点击任意的重复字使其在文章进行 <strong>高亮</strong> 出来。但是简单的高亮还不行；会破坏 HTML 的结构；想不破会就得做一些处理；</p>
<a id="more"></a>
<h2 id="1-正则匹配方法"><a href="#1-正则匹配方法" class="headerlink" title="1.正则匹配方法"></a>1.正则匹配方法</h2><p>实现高亮这一效果其实方法很多；这里我们使用的方法是 <strong> 正则匹配替换 </strong>， 但是在以正则匹配成功后点击高亮时，你会发现当匹配到标题里的重复字时，文章的 HTML 结构会坏掉；</p>
<p>为什么会破坏结构呢？  这里我们在控制台做个小实例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> title = <span class="string">'&lt;h2 id="用-rem-单位代替-px"&gt;&lt;a href="#用-rem-单位代替-px" class="headerlink" title="用 rem 单位代替 px"&gt;&lt;/a&gt;用 rem 单位代替 px&lt;/h2&gt;'</span></div><div class="line"></div><div class="line"><span class="comment">//以上是我自己博客里的一篇 [纯html5css3响应式笔记](/blog/2016/11/18/html5css3%E5%93%8D%E5%BA%94%E5%BC%8F%E7%AC%94%E8%AE%B0/) 里的一个小标题的标签结构；然后我们声明一个正则：</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> regx = <span class="keyword">new</span> <span class="built_in">RegExp</span>( <span class="string">`(<span class="subst">$&#123; '单位代替' &#125;</span>)`</span>, <span class="string">'g'</span> );</div><div class="line"></div><div class="line"><span class="comment">//当我们以正则替换： </span></div><div class="line"></div><div class="line">a.replace( regx, <span class="string">`&lt;span style="background: red;"&gt;单位代替&lt;/span&gt;`</span> )</div></pre></td></tr></table></figure>
<p>这时你就会发现匹配后返回的结果会把 HTML 结构里所有出现 <strong>单位代替</strong> 这个单词替换成我们高亮内容；这样就破坏了这段代码；而正常我们要过滤标签的属性值，只要匹配标签里的内容；<br>怎么处理这个呢？这里想到了一个方法：先把所有的标签替换保存起来，然后我们去真正的替换我们要的内容，然后在吧之前保存的内容还回去；</p>
<p>代码实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">storeResults.addEventListener( <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> event </span>)</span>&#123;<span class="comment">//在你存放结果写个事件代理</span></div><div class="line">  <span class="keyword">var</span> target = event.target;</div><div class="line"></div><div class="line">  searchValue = target.innerHTML;<span class="comment">//获取你点击的内容</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> s = str; <span class="comment">// 把你的 HTML 临时保存一下</span></div><div class="line">  <span class="keyword">var</span> regx = <span class="keyword">new</span> <span class="built_in">RegExp</span>( <span class="string">`(<span class="subst">$&#123; searchValue &#125;</span>)`</span>, <span class="string">'g'</span> ); <span class="comment">// 以获取的内容创建正则</span></div><div class="line">  <span class="keyword">var</span> placeholders = []; <span class="comment">// 临时空间，存储你替换的标签</span></div><div class="line"></div><div class="line">  s = s.replace( <span class="regexp">/&lt;.+?&gt;/g</span>, s =&gt; &#123; <span class="comment">// 临时把所有标签替换储存起来</span></div><div class="line">    placeholders.push( s );</div><div class="line">    <span class="keyword">return</span> <span class="string">`&lt;<span class="subst">$&#123; placeholders.length - 1 &#125;</span>&gt;`</span>;</div><div class="line">  &#125; );</div><div class="line"></div><div class="line">  s = s.replace( regx, <span class="string">`&lt;span style="background: red;"&gt;$1&lt;/span&gt;`</span> );<span class="comment">//匹配存储后剩下的内容</span></div><div class="line"></div><div class="line">  s = s.replace( <span class="regexp">/&lt;(\d+)&gt;/g</span>, ( s, n ) =&gt; placeholders[ <span class="built_in">Number</span>( n ) ] );<span class="comment">//匹配完了再把之前存的标签在还回去</span></div><div class="line"></div><div class="line">  <span class="built_in">document</span>.querySelector( <span class="string">'.article-entry'</span> ).innerHTML = s;<span class="comment">//把结果显出来</span></div><div class="line">&#125;, <span class="literal">false</span> );</div></pre></td></tr></table></figure>
<p>这样就可以不破坏原来的 HTML 结构且插标签了；</p>
<h2 id="2-利用-DOM-节点"><a href="#2-利用-DOM-节点" class="headerlink" title="2.利用 DOM 节点"></a>2.利用 DOM 节点</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">storeResults.addEventListener( <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> event </span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> target = event.target;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> container = <span class="built_in">document</span>.querySelector( <span class="string">'.article-entry'</span> );<span class="comment">//获得文章div</span></div><div class="line">    <span class="keyword">var</span> searchValue = target.innerHTML;</div><div class="line">    <span class="keyword">var</span> regx = <span class="keyword">new</span> <span class="built_in">RegExp</span>( <span class="string">`(<span class="subst">$&#123; searchValue &#125;</span>)`</span>, <span class="string">'g'</span> );</div><div class="line"></div><div class="line">    <span class="keyword">var</span> replace = <span class="function"><span class="keyword">function</span>(<span class="params"> el </span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> childs = el.childNodes; <span class="comment">//获得文章节点集合</span></div><div class="line"></div><div class="line">      <span class="keyword">for</span>( <span class="keyword">var</span> child <span class="keyword">of</span> childs )&#123; <span class="comment">// 循环遍历节点</span></div><div class="line">        <span class="keyword">if</span>( child.nodeType === Node.TEXT_NODE )&#123; <span class="comment">//判断是不是文字节点</span></div><div class="line">          RemoveReplace( child, child.nodeValue.replace( regx, <span class="string">`&lt;span style="background: red;"&gt;$1&lt;/span&gt;`</span> ) );<span class="comment">//是就匹配替换掉</span></div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>( child.nodeType === Node.ELEMENT_NODE )&#123; <span class="comment">//判断是不是元素节点</span></div><div class="line">          replace( child );<span class="comment">//是就递归调用</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    container.innerHTML = str;<span class="comment">//str是一开始获取定义的 HTML 结构</span></div><div class="line"></div><div class="line">    replace( container );</div><div class="line">  &#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>以上代码中的 RemoveReplace() 是我的一个封装函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span>(<span class="params"> html </span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> divTemp = <span class="built_in">document</span>.createElement( <span class="string">'div'</span> );</div><div class="line">    divTemp.innerHTML = <span class="built_in">Array</span>.isArray( html ) ? html.join(<span class="string">''</span>) : html;</div><div class="line">    divTemp = divTemp.childNodes;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> divTemp;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">RemoveReplace</span>(<span class="params"> insertNode, html </span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> divTemp = change( html );</div><div class="line"></div><div class="line">  <span class="keyword">var</span> l = insertNode.nextSibling;</div><div class="line">  <span class="keyword">while</span>( divTemp.length )</div><div class="line">    insertNode.parentNode.insertBefore( divTemp[ <span class="number">0</span> ], l );</div><div class="line"></div><div class="line">  insertNode.parentNode.removeChild( insertNode );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这代码是用于删除替换节点；</p>
<p>以上是两种文章高亮的方法，当然方法也不少，比如用<code>indexOf</code>去获取位置在匹配替换，也可以用浏览器的选中高亮方法；喜欢的朋友可以自己研究研究。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[找出文章的重复字]]></title>
      <url>/blog/2016/11/24/%E6%89%BE%E5%87%BA%E6%96%87%E7%AB%A0%E9%87%8D%E5%A4%8D%E5%AD%97/</url>
      <content type="html"><![CDATA[<p><strong>需求</strong>：你任意给出一篇文章，而代码实现把文章中出现重复的单词组给一一找出来，这样做的好处就是可以看出你这篇文章的质量，有没有滥用单词组，也可以找出文中重复的关键字。</p>
<a id="more"></a>
<p>实现这一需求得去找一篇文章，复制过来，然后在编辑器声明一个变量等于我们复制过来的文章内容；</p>
<h2 id="找出符合要求的字符"><a href="#找出符合要求的字符" class="headerlink" title="找出符合要求的字符"></a>找出符合要求的字符</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="built_in">document</span>.querySelector( <span class="string">'.article-entry'</span> ).innerHTML;</div><div class="line"><span class="keyword">let</span> indexing = <span class="built_in">document</span>.querySelector( <span class="string">'.indexing'</span> );<span class="comment">//存放结果的div</span></div><div class="line"><span class="keyword">let</span> resultsMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line"><span class="keyword">var</span> results = [];</div><div class="line"><span class="keyword">var</span> searchValue;</div><div class="line"><span class="keyword">let</span> article = str.replace( <span class="regexp">/[^\u4E00-\u9FFF]+/g</span>, <span class="string">'-'</span> );<span class="comment">//获取文章中的中文内容，把标点符号替换成 “-” 以便接下来过滤不要；</span></div><div class="line"><span class="keyword">let</span> <span class="keyword">as</span> = [<span class="string">"个"</span>,<span class="string">"的"</span>,<span class="string">"就"</span>,<span class="string">"是"</span>] <span class="comment">//声明几个不要的虚词，这里看你需求自定；</span></div><div class="line"><span class="keyword">let</span> maximumLength = <span class="number">10</span>;<span class="comment">//定义你要单词最大长度</span></div><div class="line"><span class="keyword">let</span> strLength = str.length;<span class="comment">//获取文章的长度</span></div></pre></td></tr></table></figure>
<p>起先我们得先用 <strong>for套for</strong> 的方法去扫我们的文章，这里定义了10个字符长度的范围，所以扫出来是10个字的字符在到1个字的一个字符串；<br>并且通过 if 过滤了 空字符串、不包含 “-” 的词组和用正则排除的不要的无效字符的一个字符串；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i = maximumLength; i &gt;= <span class="number">2</span>; i-- )&#123; </div><div class="line">  <span class="keyword">for</span>( <span class="keyword">var</span> j = <span class="number">0</span>; j &lt; article.length; j ++ )&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> screening = article.slice( j-i, j);</div><div class="line">    <span class="keyword">if</span>( screening &amp;&amp; !~screening.indexOf( <span class="string">'-'</span> ) &amp;&amp; !(<span class="keyword">new</span> <span class="built_in">RegExp</span>( <span class="keyword">as</span>.join(<span class="string">"|"</span>), <span class="string">"g"</span> )).test(screening))&#123;</div><div class="line">      resultsMap.set( screening, resultsMap.get( screening ) ? resultsMap.get( screening )+<span class="number">1</span> : <span class="number">1</span> )</div><div class="line">    &#125;  </div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码有点意思的就是这个毛毛虫： “~”，也就是 <strong>按位取反</strong> 相当于你输：~80 = -81，~1 = -2，~-1 = 0，~0 = -1；喜欢可以自己控制台试试哦；</p>
<p>好了回到正题；当我们得到这堆字符串后，我们要开始对他在过过率，其中出现2次以内基本是不要的，然后你会发现剩下的字符串会出现一个比较长的字符其实已经包含了另一个比较短的字符，这也是我们要过滤掉的：</p>
<h2 id="过滤得到结果"><a href="#过滤得到结果" class="headerlink" title="过滤得到结果"></a>过滤得到结果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">    </div><div class="line"><span class="keyword">let</span> wordgroup = <span class="string">''</span>; <span class="comment">//声明临时变量，存放对比的大数组</span></div><div class="line"> <span class="keyword">for</span>( <span class="keyword">let</span> [ word, times ] <span class="keyword">of</span> resultsMap )&#123;</div><div class="line">    <span class="keyword">if</span>( times &lt; <span class="number">3</span> )&#123; <span class="comment">//过滤掉1和2长度的数组</span></div><div class="line">      <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>( !~wordgroup.indexOf( word ) )&#123;<span class="comment">//遍历剩下的数组，如果临时数组没有累加进去，如果有就过滤不要，这样就过滤掉了长字符串包含的短字符串</span></div><div class="line">      wordgroup += <span class="string">`,<span class="subst">$&#123; word &#125;</span>`</span>;</div><div class="line"></div><div class="line">      results.push(&#123; name: word, number: times &#125;)<span class="comment">//这里添加到结果里转为我们要的数据格式</span></div><div class="line">      results.sort(<span class="function"><span class="keyword">function</span>(<span class="params"> a,b </span>)</span>&#123;<span class="comment">//排序一下</span></div><div class="line">        <span class="keyword">return</span> b.number - a.number</div><div class="line">      &#125;)</div><div class="line">      results.splice(<span class="number">5</span>)<span class="comment">//最后我选着保留最多的5个字符串，数量可以自己定</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>这样文章出现的重复字就可以过滤得到了，就可以看出一篇文章的品质，延伸一下你也可查到该文章中有哪些关键字，并且可以关联到你博客中的所有文章，使之可以通过关键字去查看你的博客内容；</p>
<p>基于以上找出重复字可以做 <a href="/blog/2016/11/26/%E6%96%87%E7%AB%A0%E9%AB%98%E4%BA%AE/">文章高亮</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[纯html5css3响应式笔记]]></title>
      <url>/blog/2016/11/18/html5css3%E5%93%8D%E5%BA%94%E5%BC%8F%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>前天跟一个设计的朋友聊天，说到响应式布局的合理性、用户体验，然后自己检讨了一下，自从开始学 html5 css3 到 js 都没做个一个像样点的纯 html、css 布局类的东西，刚好最近几天有时间，就码了一个 <a href="/writing/music-player-css/dist/index.html">纯html、css的音乐播放器</a>；</p>
<a id="more"></a>
<h2 id="media基本知识"><a href="#media基本知识" class="headerlink" title="@media基本知识"></a>@media基本知识</h2><p>这里要用到的也是 css3 中的 <a href="http://www.css88.com/book/css/properties/media-queries/index.htm" target="_blank" rel="external">CSS Media Queries Module</a>，通过不同的媒体类型和条件定义样式表规则。让 CSS 可以更精确作用于不同的媒体类型和同一媒体的不同条件。大部分媒体特性都接受 min 和 max 用于表达 ” 大于或等于 ” 和 “ 小与或等于 ” 。如：width 会有 <strong>min-width</strong> 和 <strong>max-width</strong>；也可以被用在 HTML 和XML 中。</p>
<p>基本的语法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> mediatype and|not|only (media feature) &#123;</div><div class="line">    <span class="selector-tag">CSS-Code</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>而在定义时我们可以这样</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (width:<span class="number">1000px</span>)&#123; … &#125;</div></pre></td></tr></table></figure>
<p>当媒体屏幕宽度 1000px 时{ }</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (max-width:<span class="number">1000px</span>)&#123;&#125;</div></pre></td></tr></table></figure>
<p>媒体屏幕最大宽 1000px 时显示{}</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">1000px</span>)&#123;&#125;</div></pre></td></tr></table></figure>
<p>媒体屏幕最小宽 1000px 时显示 {}</p>
<p>也可以针对不同的媒体使用不同 <strong>stylesheets</strong> 再引入 .css 文件</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;link rel="stylesheet" media="mediatype and|not|only (media feature)" href="mystylesheet.css"&gt;</div></pre></td></tr></table></figure>
<p>一般常用媒体类型有：</p>
<p><strong>all</strong>    用于所有设备。<br><strong>print</strong> 用于打印机和打印预览。<br><strong>screen</strong>    用于电脑屏幕，平板电脑，智能手机等。<br><strong>speech</strong>    应用于屏幕阅读器等发声设备。</p>
<p>而所用到的 <a href="http://www.runoob.com/cssref/css3-pr-mediaquery.html" target="_blank" rel="external">媒体功能</a> 也有不少;</p>
<p>在这我就用到几个：</p>
<ol>
<li><strong>aspect-ratio</strong>    定义输出设备中的页面可见区域宽度与高度的比率</li>
<li><strong>device-aspect-ratio</strong> 定义输出设备的屏幕可见宽度与高度的比率。</li>
<li><strong>device-height</strong> 定义输出设备的屏幕可见高度。</li>
<li><strong>device-width</strong>    定义输出设备的屏幕可见宽度。</li>
<li><strong>height</strong>    定义输出设备中的页面可见区域高度。</li>
<li><strong>max-device-aspect-ratio</strong> 定义输出设备的屏幕可见宽度与高度的最大比率。</li>
<li><strong>max-device-height</strong> 定义输出设备的屏幕可见的最大高度。</li>
<li><strong>max-device-width</strong> 定义输出设备的屏幕最大可见宽度。</li>
<li><strong>max-height</strong> 定义输出设备中的页面最大可见区域高度。</li>
<li><strong>max-resolution</strong> 定义设备的最大分辨率。</li>
<li><strong>max-width</strong> 定义输出设备中的页面最大可见区域宽度。</li>
<li><strong>min-aspect-ratio</strong> 定义输出设备中的页面可见区域宽度与高度的最小比率。</li>
<li><strong>min-device-aspect-ratio</strong> 定义输出设备的屏幕可见宽度与高度的最小比率。</li>
<li><strong>min-device-width</strong> 定义输出设备的屏幕最小可见宽度。</li>
<li><strong>min-device-height</strong>    定义输出设备的屏幕的最小可见高度。</li>
<li><strong>min-height</strong>     定义输出设备中的页面最小可见区域高度。</li>
<li><strong>min-resolution</strong> 定义设备的最小分辨率。</li>
<li><strong>min-width</strong>    定义输出设备中的页面最小可见区域宽度。</li>
<li><strong>orientation</strong>    定义输出设备中的页面可见区域高度是否大于或等于宽度。</li>
<li><strong>width</strong>    定义输出设备中的页面可见区域宽度。</li>
</ol>
<h2 id="不同设备宽度的配置"><a href="#不同设备宽度的配置" class="headerlink" title="不同设备宽度的配置"></a>不同设备宽度的配置</h2><p>/<em> 兼容 iphone5,因为5和4的屏幕宽度一样 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> (device-height:<span class="number">568px</span>) and (-webkit-min-device-pixel-ratio:<span class="number">2</span>)&#123; &#125;</div><div class="line">@<span class="keyword">media</span> only screen and (max-device-width :<span class="number">480px</span>)&#123; &#125;</div><div class="line">@<span class="keyword">media</span> only screen and (min-device-width :<span class="number">481px</span>)&#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 6 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> (min-device-width : <span class="number">375px</span>) and (max-device-width : <span class="number">667px</span>) and (-webkit-min-device-pixel-ratio : <span class="number">2</span>)&#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 6+ </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> (min-device-width : <span class="number">414px</span>) and (max-device-width : <span class="number">736px</span>) and (-webkit-min-device-pixel-ratio : <span class="number">3</span>)&#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 魅族 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> only screen and (min-device-width :<span class="number">1080px</span>) and (-webkit-min-device-pixel-ratio : <span class="number">2.5</span>)&#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> mate7 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> only screen and (min-device-width :<span class="number">1080px</span>) and (-webkit-min-device-pixel-ratio : <span class="number">3</span>)&#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 4 4s </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> only screen and (device-height :<span class="number">480px</span>) and (-webkit-device-pixel-ratio:<span class="number">2</span>&#123; &#125;</div><div class="line"></div><div class="line">@<span class="keyword">media</span> screen and (min-width: <span class="number">320px</span>) and (max-width: <span class="number">480px</span>) &#123;  &#125;</div></pre></td></tr></table></figure>
<p>/<em> 平板之类的宽度 1024 以下设备 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> only screen and (min-width: <span class="number">321px</span>) and (max-width: <span class="number">1024px</span>) &#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> PC 客户端或大屏幕设备: 1028px 至更大 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> only screen and (min-width: <span class="number">1029px</span>) &#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 竖屏 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (orientation:portrait) and (max-width: <span class="number">720px</span>) &#123; &#125;</div></pre></td></tr></table></figure>
<p>/<em> 横屏 </em>/</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (orientation:landscape)&#123; &#125;</div></pre></td></tr></table></figure>
<p>像这样的响应式布局；如 <a href="http://getbootstrap.com/css/#grid" target="_blank" rel="external">bootstrap</a> 这一类的库 就做的不错；</p>
<h2 id="用-rem-单位代替-px"><a href="#用-rem-单位代替-px" class="headerlink" title="用 rem 单位代替 px"></a>用 rem 单位代替 px</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">  <span class="keyword">var</span> html=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"html"</span>)[<span class="number">0</span>];</div><div class="line">  <span class="keyword">var</span> a=html.offsetWidth/<span class="number">25</span>;</div><div class="line">  html.style.fontSize=a+<span class="string">"px"</span>;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>把这段代码插到你的 head 标签中， 然后以 rem 单位代替 PX； 这样你的 1rem 在不同的屏幕是不一样的;<br>所以你要是喜欢 可以 试试 研究研究☺</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React实现模拟人机对话]]></title>
      <url>/blog/2016/11/09/React%E5%AE%9E%E7%8E%B0%E4%BA%BA%E6%9C%BA%E5%AF%B9%E8%AF%9D/</url>
      <content type="html"><![CDATA[<p>起先我们来提下要求把，就是我发出一条聊天记录，手机回我一条信息;<br>实现起来其实很简单，主要还是在编写前得设计好结构；还有你的思路要清晰;<br>然我们在看下设计图把：</p>
<p><a href="/writing/dialog/dist/"> 效果在我的作品里哦！点击查看 </a></p>
<p><img src="http://uxhzz.com/images/ChatLog.png" alt=""></p>
<a id="more"></a>
<p>在写代码前我们除了引入React和ReactDOM; 还需一个封装好的Component.js,这组件的功能是仿<a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="external">Redux</a>;功能就是在父组件定义一个Component.initSharedState( { } ), 这个方法就是好比如我们定义了一个共享的箱子，而所有的子组件都可以共用这个箱子来存信息跟获取信息;<br>喜欢的朋友可以看源码<a href="https://git.coding.net/uxhzz/wenku.git" target="_blank" rel="external">Component.j</a> </p>
<p>初始的配置有了，html和css我们也不废话了，那我们开始来定义我们的<a href="https://coding.net/u/uxhzz/p/wenku/git/blob/master/dialog/src/index.js" target="_blank" rel="external">index</a>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Component.initSharedState( &#123;</div><div class="line">  robot: [</div><div class="line">    &#123; value: <span class="string">'你说什么？我不太明白你说的话？'</span> &#125;,</div><div class="line">    &#123; value: <span class="string">'我是一个机器人，开心的机器人？'</span> &#125;,</div><div class="line">    &#123; value: <span class="string">'今天天气真好，你心情好吗？'</span> &#125;,</div><div class="line">    &#123; value: <span class="string">'机器人有什么可以帮你的吗？'</span> &#125;</div><div class="line">  ],</div><div class="line"></div><div class="line">  log: [] <span class="comment">//log的将要的基本结构是: log: [  message: 'xxxx', from: 'xxxx']</span></div><div class="line">&#125; );</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span>,</span></div><div class="line">  document.querySelector( '.device' )</div><div class="line">);</div></pre></td></tr></table></figure>
<p>这个就是我们跟机器人的共享仓库; robot:[]定义了机器人将要对我们给出信息所要回复我们的内容; log:[]是我们用来存储input输入的信息跟robot所吐回来的信息，以用来render到我们的<code>&lt;div class=&quot;device&quot;&gt;</code>里,而<code>&lt;Home /&gt;</code>是用来接收我们接下来要创建的AddInput和ChatLog两个子组件的;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">import AddInput from &apos;../../components/AddInput&apos;; //引入AddInput</div><div class="line">import ChatLog from &apos;../../components/ChatLog&apos;;   //引入ChatLog</div><div class="line"></div><div class="line"></div><div class="line">export default class Home extends Component &#123;</div><div class="line">  constructor( props )&#123;</div><div class="line">    super( props );</div><div class="line"></div><div class="line">    this.importSharedState( &apos;log&apos;, &apos;robot&apos; ); //获取进口共享状态资源里的log和robot数据</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  onAdd()&#123; </div><div class="line">    let robot = this.sharedState.robot;</div><div class="line"></div><div class="line">    clearTimeout( this.autoReplyTimer ); //当输入信息时间不超1秒，机器人不回应，</div><div class="line">    this.autoReplyTimer = setTimeout( () =&gt; &#123; //箭头函数的this指向的外面的this</div><div class="line">      this.sharedState.log.push( &#123; //往log里随机添加信息</div><div class="line">        message: robot[ Math.floor( Math.random() * robot.length ) ].value,</div><div class="line">        from: &apos;robot&apos; </div><div class="line">      &#125; );</div><div class="line"></div><div class="line">      this.updateSharedState( &apos;log&apos; ); // 刷新log信息</div><div class="line">    &#125;, 1000 );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render()&#123;</div><div class="line">    return (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;div className=&quot;speaker&quot;&gt;&lt;/div&gt;</div><div class="line">        &lt;ChatLog /&gt;</div><div class="line">        &lt;AddInput onAdd=&#123; this.onAdd.bind( this ) &#125; /&gt; //绑定onAdd()用于log数据发生变化时,渲染到显示DOM中</div><div class="line">        &lt;div className=&quot;button&quot;&gt;&lt;/div&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>AddInput组件代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">AddInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>( props )&#123;</div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.importSharedState( <span class="string">'log'</span> ); <span class="comment">//引入共享的log资源</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  onKeyDown( event )&#123;</div><div class="line">    <span class="keyword">if</span>( event.keyCode !== <span class="number">13</span> )&#123; <span class="comment">//如果不是13这个确定键  不要</span></div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">const</span> value = event.target.value;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>( !value )&#123; <span class="comment">// 如果输入框没有值  不要</span></div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">this</span>.sharedState.log.push( &#123; message: value, <span class="keyword">from</span>: <span class="string">'me'</span> &#125; );</div><div class="line">    <span class="comment">//虚拟DOM中log添加信息</span></div><div class="line">    <span class="keyword">this</span>.updateSharedState( <span class="string">'log'</span> ); <span class="comment">//更新log数据</span></div><div class="line"></div><div class="line">    event.target.value = <span class="string">''</span>; <span class="comment">//清空输入框值</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span>( <span class="keyword">this</span>.props.onAdd ) <span class="comment">//当机器人的onAdd存在</span></div><div class="line">      <span class="keyword">this</span>.props.onAdd();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"copy-editor"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"pic_p1"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyDown</span>=<span class="string">&#123;</span> <span class="attr">this.onKeyDown.bind</span>( <span class="attr">this</span> ) &#125;  <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">className</span>=<span class="string">"btn"</span> <span class="attr">placeholder</span>=<span class="string">"输入内容"</span>/&gt;</span> //绑定键盘onKeyDown的确定键事件</div><div class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"send"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">"phiz"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ChatLog组件代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">ChatLog</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>( props )&#123;</div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.importSharedState( <span class="string">'log'</span> );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentDidUpdate()&#123;</div><div class="line">    <span class="keyword">let</span> screen = <span class="keyword">this</span>.refs.screen; <span class="comment">// 获得ref的DOM节点</span></div><div class="line">    screen.scrollTop = screen.scrollHeight; <span class="comment">//网页自动滚屏实现</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"screen"</span> <span class="attr">ref</span>=<span class="string">"screen"</span>&gt;</span> // ref 是用于获得当前的DOM节点</div><div class="line">          &#123;</div><div class="line">            this.sharedState.log.map( ( item, index ) =&gt; &#123;</div><div class="line">              const dir = item.from === 'me' ? 'right' : 'left'; //设置方向判断me渲染出来的我们输入信息或者是机器人的回应信息</div><div class="line"></div><div class="line">              return <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;</span> &#123; <span class="attr">clear:</span> '<span class="attr">both</span>' &#125; &#125; <span class="attr">key</span>=<span class="string">&#123;</span> <span class="attr">index</span> &#125;&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span> '<span class="attr">dialog-</span>' + <span class="attr">dir</span> &#125;&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&#123;</span> '<span class="attr">role-</span>' + <span class="attr">dir</span> &#125;&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&#123;</span> '<span class="attr">content-</span>' + <span class="attr">dir</span> &#125;&gt;</span>&#123; item.message &#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            &#125; )</div><div class="line">          &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[html5的离线存储和各种html5的head头标签]]></title>
      <url>/blog/2016/11/08/html5%E7%9A%84%E7%A6%BB%E7%BA%BF%E5%AD%98%E5%82%A8%E5%92%8C%E5%90%84%E7%A7%8Dhtml5%E7%9A%84head%E5%A4%B4%E6%A0%87%E7%AD%BE/</url>
      <content type="html"><![CDATA[<p>html5的离线存储和html5新增的你所不知的head头标签</p>
<a id="more"></a>
<p>iOS中的safri浏览器可以将一个网页添加到桌面，当做一个独立的应用运行。这需要html5的相关知识和开发经验。这里我们只讲webApp添加桌面后到启动的相关细节。</p>
<p>全屏显示：<br><code>&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot; /&gt;</code></p>
<p>系统顶栏的颜色(黑色和白色)：</p>
<p><code>&lt;meta name=&quot;apple-mobile-app-status-bar-style&quot; content=&quot;white&quot; /&gt;</code><br><code>&lt;meta name=&quot;apple-mobile-app-status-bar-style&quot; content=&quot;black&quot; /&gt;</code></p>
<p>桌面程图标(如果不设置，则图标会显示网页的截图)：<br><code>&lt;link rel=&quot;apple-touch-icon&quot; href=&quot;icon.png&quot; /&gt;</code></p>
<p>如果想给不同的设备匹配不同的icon，可以加上size属性：<br><code>&lt;link rel=&quot;apple-touch-icon&quot; size=&quot;72x72&quot; href=&quot;icon-ipad.png&quot; /&gt;</code><br><code>&lt;link rel=&quot;apple-touch-icon&quot; size=&quot;114x114&quot; href=&quot;icon-iphone4.png&quot; /&gt;</code></p>
<p>这里做成APP后可以用HTML5离线存储，把js和css和图片文件缓存起来;</p>
<ol>
<li><p>在index.html里加上<html manifest="test.manifest"></html></p>
</li>
<li><p>在创建test.manifest文件，</p>
</li>
<li>manifest文件的mime-type必须是 text/cache-manifest类型,内容清单格式如下:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">CACHE MANIFEST</div><div class="line">#上面一句必须</div><div class="line">#v1.0.0</div><div class="line">#需要缓存的文件</div><div class="line">CACHE:</div><div class="line">a.js</div><div class="line">b.css</div><div class="line">#不需要缓存的文件</div><div class="line">NETWORK:</div><div class="line">*</div><div class="line">#无法访问页面</div><div class="line">FALLBACK:</div><div class="line">404.html</div></pre></td></tr></table></figure>
<p>注意点：</p>
<p>   　　1.对于每个index.html?id=1或index.html?id=2都会分别缓存index.html页面，可以通过chrome浏览器Resources/Application Cache观察</p>
<p>   　　2.如果想更新缓存内容，只要修改下manifest文件即可，如改版本号v1.0.1<br>   　　3.或者到Developer Tools 里的Network里清楚缓存;</p>
<h1 id="接下来列一下网上收集的各种html5的head头标签"><a href="#接下来列一下网上收集的各种html5的head头标签" class="headerlink" title="接下来列一下网上收集的各种html5的head头标签"></a>接下来列一下网上收集的各种html5的head头标签</h1><p><a href="http://www.css88.com/archives/6410" target="_blank" rel="external"> 原文地址 </a> </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 有助于防止出现内容重复的问题 --&gt;</div><div class="line">&lt;link rel="canonical" href="https://example.com/2010/06/9-things-to-do-before-entering-social-media.html"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 之前用于包含 icon 链接，但已被废弃并不再使用 --&gt;</div><div class="line">&lt;link rel="shortlink" href="https://example.com/?p=42"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 链接到当前文档的一个 AMP HTML 版本 --&gt;</div><div class="line">&lt;link rel="amphtml" href="https://example.com/path/to/amp-version.html"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 表明一个 CSS 样式表 --&gt;</div><div class="line">&lt;link rel="stylesheet" href="https://example.com/styles.css"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 链接到一个指定 Web 应用程序“安装”证书的 JSON 文件 --&gt;</div><div class="line">&lt;link rel="manifest" href="manifest.json"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 链接到文档的作者 --&gt;</div><div class="line">&lt;link rel="author" href="humans.txt"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 指向一个适用于链接内容的版权申明 --&gt;</div><div class="line">&lt;link rel="copyright" href="copyright.html"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 给出可能的你的另一种语言的文档位置参考 --&gt;</div><div class="line">&lt;link rel="alternate" href="https://es.example.com/" hreflang="es"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 提供了关于作者或其他人的信息 --&gt;</div><div class="line">&lt;link rel="me" href="https://google.com/profiles/thenextweb" type="text/html"&gt;</div><div class="line">&lt;link rel="me" href="mailto:name@example.com"&gt;</div><div class="line">&lt;link rel="me" href="sms:+15035550125"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 链接到一个文档，包含当前文档的一个归档链接 --&gt;</div><div class="line">&lt;link rel="archives" href="https://example.com/2003/05/" title="May 2003"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 链接到层次结构中的顶级资源 --&gt;</div><div class="line">&lt;link rel="index" href="https://example.com/" title="DeWitt Clinton"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 给出该文档的起点 --&gt;</div><div class="line">&lt;link rel="start" href="https://example.com/photos/pattern_recognition_1_about/" title="Pattern Recognition 1"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 引导当前文档的前述资源序列 --&gt;</div><div class="line">&lt;link rel="prev" href="https://example.com/opensearch/opensearch-and-openid-a-sure-way-to-get-my-attention/" title="OpenSearch and OpenID? A sure way to get my attention."&gt;</div><div class="line"> </div><div class="line">&lt;!-- 给出一个自我参考 - 当文档有多个可能的参考时非常有用 --&gt;</div><div class="line">&lt;link rel="self" type="application/atom+xml" href="https://example.com/atomFeed.php?page=3"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 分别是在一系列文件中的第一个、下一个、上一个和最后一个 --&gt;</div><div class="line">&lt;link rel="first" href="https://example.com/atomFeed.php"&gt;</div><div class="line">&lt;link rel="next" href="https://example.com/atomFeed.php?page=4"&gt;</div><div class="line">&lt;link rel="previous" href="https://example.com/atomFeed.php?page=2"&gt;</div><div class="line">&lt;link rel="last" href="https://example.com/atomFeed.php?page=147"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 当使用第三方服务来维护 blog 时使用 --&gt;</div><div class="line">&lt;link rel="EditURI" href="https://example.com/xmlrpc.php?rsd" type="application/rsd+xml" title="RSD"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 当另一个 WordPress 博客链接到你的 WordPress 博客或文章时形成一个自动化的评论 --&gt;</div><div class="line">&lt;link rel="pingback" href="https://example.com/xmlrpc.php"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 当你在自己的页面上链接到一个 url 时通知它 --&gt;</div><div class="line">&lt;link rel="webmention" href="https://example.com/webmention"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 加载一个外部的 HTML 文件到当前 HTML 文件中 --&gt;</div><div class="line">&lt;link rel="import" href="component.html"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 打开搜索 --&gt;</div><div class="line">&lt;link rel="search" href="/open-search.xml" type="application/opensearchdescription+xml" title="Search Title"&gt;</div><div class="line"> </div><div class="line">&lt;!-- Feeds --&gt;</div><div class="line">&lt;link rel="alternate" href="https://feeds.feedburner.com/example" type="application/rss+xml" title="RSS"&gt;</div><div class="line">&lt;link rel="alternate" href="https://example.com/feed.atom" type="application/atom+xml" title="Atom 0.3"&gt;</div><div class="line"> </div><div class="line">&lt;!-- 预取，预载，预浏览 --&gt;</div><div class="line">&lt;link rel="dns-prefetch" href="//example.com/"&gt;</div><div class="line">&lt;link rel="preconnect" href="https://www.example.com/"&gt;</div><div class="line">&lt;link rel="prefetch" href="https://www.example.com/"&gt;</div><div class="line">&lt;link rel="prerender" href="https://example.com/"&gt;</div><div class="line">&lt;link rel="preload" href="image.png" as="image"&gt;</div><div class="line">&lt;!-- 更多信息：https://css-tricks.com/prefetching-preloading-prebrowsing/ --&gt;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[react-router入门学习笔记]]></title>
      <url>/blog/2016/11/06/react-router%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>react-router是react的一个强大的路由库，可以是UI和路由同步,路由配置是一组指令，用来告诉 router 如何匹配 URL以及匹配后如何执行代码,简单的API却有非常强大的功能：延迟加载、动态路由匹配、路径转换权限处理。让你的url变得更加直观。</p>
<a id="more"></a>
<p>首先创建一个项目，在终端引入：</p>
<p><code>$ npm install --save react-router</code></p>
<p>然后在文件夹下引入：</p>
<p><code>import { Router, Route, Link, hashHistory, IndexRoute, Redirect } from &#39;react-router&#39;;</code></p>
<p>从本质来讲，react-rout就是一个组件。如下：</p>
<p><code>render(&lt;Router/&gt;, document.querySelector( &#39;#root&#39; ))</code></p>
<p>而他的一些语法：</p>
<p>路由路径是匹配一个（或一部分）URL 的 一个字符串模式。大部分的路由路径都可以直接按照字面量理解，除了以下几个特殊的符号：</p>
<ul>
<li><code>:paramName</code> – 匹配一段位于 /、? 或 # 之后的 URL。 命中的部分将被作为一个参数</li>
<li><code>()</code> – 在它内部的内容被认为是可选的</li>
<li><code>*</code> – 匹配任意字符（非贪婪的）直到命中下一个字符或者整个 URL 的末尾，并创建一个 splat 参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;Route path=<span class="string">"/a/:name"</span>&gt;         <span class="comment">// 匹配 /a/b 或 /a/c</span></div><div class="line">&lt;Route path=<span class="string">"/a(/:name)"</span>&gt;       <span class="comment">// 匹配 /a 或 /a/b 或 /a/c</span></div><div class="line">&lt;Route path=<span class="string">"/a/*.*"</span>&gt;           <span class="comment">// 匹配 /a/b.jpg 或 /a/b/c/d.jpg</span></div></pre></td></tr></table></figure>
<p>在index下渲染router,这里我引三个组件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">import React from &quot;react&quot;;</div><div class="line">import ReactDOM from &quot;react-dom&quot;;</div><div class="line">import &#123; Router, Route, Link, hashHistory, IndexRoute, Redirect &#125; from &apos;react-router&apos;;</div><div class="line"></div><div class="line">import About from &quot;...&quot;;</div><div class="line">import Home from &quot;...&quot;;</div><div class="line">import Message from &quot;...&quot;;</div><div class="line"></div><div class="line">ReactDOM.render((</div><div class="line">  &lt;Router history=&#123; hashHistory &#125;&gt;</div><div class="line">    &lt;Route path=&quot;/&quot; component=&#123;Home&#125;&gt;  //这里设定Home首页</div><div class="line">      &lt;IndexRoute component=&#123;Message&#125; /&gt; //表示他在没有匹配子路由的时候，在 / 路由下渲染默认的子组件Message。</div><div class="line">      &lt;Route path=&quot;about&quot; component=&#123;About&#125;/&gt; // 这里设定一个链接，链接到About组件</div><div class="line">        &lt;Route path=&quot;messages(/:id)(/:title)&quot; component=&#123;Message&#125; /&gt;</div><div class="line">        &lt;Redirect from=&quot;messages/:id&quot; to=&quot;/messages/:id&quot; /&gt;</div><div class="line">      &lt;/Route&gt;</div><div class="line">    &lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.querySelector( &apos;#root&apos; ))</div></pre></td></tr></table></figure>
<p>相对应的 About组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">About</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>( props )&#123;</div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;h3&gt;About页面&lt;/h3&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>相对应的 Home组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Home</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>( props )&#123;</div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h1&gt;首页&lt;/h1&gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">          &lt;li&gt;&lt;IndexLink to="/" activeClassName="active"&gt;Home&lt;/IndexLink&gt;&lt;/li&gt;</div><div class="line">          &#123;</div><div class="line">          // activeClassName当某个 route 是激活状态时，</div><div class="line">          // &lt;Link&gt; 可以接收传入的 className。失活状态下是默认的 class。</div><div class="line">          // activeStyle当某个 route 是激活状态时，可以将样式添加到链接元素上。</div><div class="line">          &#125;</div><div class="line">          &lt;li&gt;&lt;Link to="/about" activeClassName="active"&gt;About页面&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to="/inbox" activeClassName="active"&gt;Inbox页面&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &#123;</div><div class="line">          // &lt;Link&gt; 可以知道哪个 route 的链接是激活状态的，</div><div class="line">          // 并可以自动为该链接添加 activeClassName 或 activeStyle。</div><div class="line">          &#125;</div><div class="line">        &lt;/ul&gt;</div><div class="line">        &#123;this.props.children&#125;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>相对应的 Home组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>( props )&#123;</div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> &lt;h3&gt;Message &#123;this.props.params.id&#125; &#123;this.props.params.title&#125;&lt;/h3&gt;</div><div class="line">    &#123;</div><div class="line">    <span class="comment">// this.props.params.id 显示你Message输入的id或title</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[属性的get和set]]></title>
      <url>/blog/2016/11/05/%E5%B1%9E%E6%80%A7getter%E5%92%8Csetter/</url>
      <content type="html"><![CDATA[<h4 id="犀牛书上getter-是拦截属性的读取操作的方法，setter是拦截属性赋值操作的方法。getter负责查询值且不带任何参数，setter则负责设置键值且值是以参数的形式传递，在他的函数体中，一切的return都是无效的。"><a href="#犀牛书上getter-是拦截属性的读取操作的方法，setter是拦截属性赋值操作的方法。getter负责查询值且不带任何参数，setter则负责设置键值且值是以参数的形式传递，在他的函数体中，一切的return都是无效的。" class="headerlink" title="犀牛书上getter 是拦截属性的读取操作的方法，setter是拦截属性赋值操作的方法。getter负责查询值且不带任何参数，setter则负责设置键值且值是以参数的形式传递，在他的函数体中，一切的return都是无效的。"></a>犀牛书上getter 是拦截属性的读取操作的方法，setter是拦截属性赋值操作的方法。getter负责查询值且不带任何参数，setter则负责设置键值且值是以参数的形式传递，在他的函数体中，一切的return都是无效的。</h4><a id="more"></a>
<p>下面是js的getter和setter的用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  <span class="comment">//创建一个类</span></div><div class="line">        <span class="keyword">this</span>.x = <span class="string">'unknown'</span>;  </div><div class="line">    &#125;  </div><div class="line">    A.prototype = &#123;  <span class="comment">//在A原型生添加一个对象；</span></div><div class="line">        set user(name) &#123;  <span class="comment">//set是拦截属性赋值操作，set必须有个参数；</span></div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'调用user的set方法'</span>);  </div><div class="line">            <span class="keyword">this</span>.x = name;  </div><div class="line">        &#125;,  </div><div class="line">        get user() &#123;  <span class="comment">//get是拦截属性的读取操作</span></div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'调用了user的get方法'</span>);  </div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.x;  </div><div class="line">        &#125;  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    <span class="keyword">var</span> p = <span class="keyword">new</span> A();</div><div class="line">    </div><div class="line">    然后你在控制台分别输入 </div><div class="line">    p.user              <span class="comment">//调用了user的get方法; "unknown"</span></div><div class="line">    和  </div><div class="line">    p.user = <span class="string">"123"</span>;     <span class="comment">//调用user的set方法;  "123"</span></div></pre></td></tr></table></figure>
<p>如果各位有兴趣的话 也可以看看以下一些例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//栗子1</span></div><div class="line"><span class="keyword">let</span> a = &#123;</div><div class="line">  set b( value )&#123;</div><div class="line">    </div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  get b()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">10</span>;</div><div class="line">  &#125;</div><div class="line">&#125;                               </div><div class="line">                                                          </div><div class="line"> a.b = <span class="number">20</span>;             <span class="comment">// 20    </span></div><div class="line"> <span class="built_in">console</span>.log(a.b * <span class="number">5</span>)  <span class="comment">// 50</span></div><div class="line">   </div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//栗子2                 </span></div><div class="line"><span class="keyword">let</span> a = &#123;</div><div class="line">  v: <span class="number">0</span>,</div><div class="line"></div><div class="line">  set b( value )&#123;</div><div class="line">    <span class="keyword">this</span>.v = value * <span class="number">10</span>;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  get b()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.v;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a.b * <span class="number">5</span>) <span class="comment">// 0</span></div><div class="line">a.b = <span class="number">15</span>;            <span class="comment">// 15</span></div><div class="line">a.v                  <span class="comment">// 已被改成150</span></div><div class="line"><span class="built_in">console</span>.log(a.b * <span class="number">5</span>) <span class="comment">// 750</span></div></pre></td></tr></table></figure>
<p>还有ES6创建类更简单了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>()&#123;</div><div class="line">    <span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  a()&#123;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">y = <span class="keyword">new</span> B;<span class="comment">//注意的是当你new出来时constructor()&#123;&#125;设定初始值会直接运行</span></div><div class="line">y.x       <span class="comment">//1</span></div><div class="line">y.a       <span class="comment">//function a()&#123;&#125;</span></div></pre></td></tr></table></figure>
<p>有了上面的  我们来看下下面的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>()&#123;</div><div class="line">    alert();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  a()&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get b()&#123;  <span class="comment">//get属性</span></div><div class="line">    alert(<span class="number">2</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">5</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">d = <span class="keyword">new</span> D;       <span class="comment">//会运行一下constructor()&#123;&#125;</span></div><div class="line">d.a()            <span class="comment">//a()未定义，返回undefind</span></div><div class="line">d.c()            <span class="comment">//c()没有，所以不是一个方法</span></div><div class="line">d.b              <span class="comment">//执行alert(2);在返回5</span></div><div class="line"><span class="number">10</span> + d.b === <span class="number">15</span>  <span class="comment">//执行alert(2);在返回true</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>()&#123;</div><div class="line">    alert();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  a()&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set b( v )&#123; <span class="comment">//set属性</span></div><div class="line">    alert(<span class="number">2</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">e = <span class="keyword">new</span> E;</div><div class="line">e.b            <span class="comment">//undefind</span></div><div class="line">e.b = <span class="number">1</span>        <span class="comment">//alert(2);后返回1</span></div><div class="line">e.b            <span class="comment">//undefind</span></div><div class="line">e.b = <span class="number">100</span>      <span class="comment">//alert(2)；后返回100</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React 生命周期简介]]></title>
      <url>/blog/2016/11/04/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%80%E4%BB%8B/</url>
      <content type="html"><![CDATA[<h1 id="react的生命周期"><a href="#react的生命周期" class="headerlink" title="react的生命周期"></a>react的生命周期</h1><p>今天来聊聊react的一些常用的API。<br><a id="more"></a><br>this.props: 想数组传递参数;<br>this.state: 读取用户点击组件导致状态变化;<br>this.setState: 修改状态值,每次修改后自动调用this.render方法;<br>getInitialState: 定义初始状态,也就是状态;可以通过this.state属性读取;<br>所以:<br>设置状态: setState<br>替换状态: replaceState<br>设置属性: setProps<br>替换属性: replaceProps<br>强制更新: forceUpdate<br>获取DOM节点: findDOMNode<br>判断组件挂载状态: isMounted</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">挂载:componentWillMount();</div></pre></td></tr></table></figure>
<p>在渲染前调用，在客户端也在服务端；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">更新:componentDidMount();</div></pre></td></tr></table></figure>
<p>在第一次渲染后调用；只在客户端，之后组件已经生成了对应的DOM结构；可以通过this.getDOMNode()来进行访问，如果想和其他javaScript框架一起使用，可以在这个框架中调用setTimeout(),setInterval或者发送AJAX请求等操作（防止局部操作阻塞UI）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">更新:componentWillReceiveProps( newProps );</div></pre></td></tr></table></figure>
<p>在数组接收到一个新的prop时被调用。这个方法在初始化render时不会被调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">更新:shouldComponentUpdate( newProps, newState );</div></pre></td></tr></table></figure>
<p>返回一个布尔值，在组件接收到的新props或者state是被调用，在初始化时或者使用forceUpdate时不被调用，可以在你确定不需要更新组件是使用;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">更新:componentWillUpdate();</div></pre></td></tr></table></figure>
<p>在组件接收到新的props或者state但还没render时被调用，在初始化时不被调用;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">更新:componentDidUpdate();</div></pre></td></tr></table></figure>
<p>在组件完成更新后，立即调用，在初始化时不被调用;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">移除: componentWillUnmount();</div></pre></td></tr></table></figure>
<p>在组件从DOM中移除的时候立刻调用;</p>
<p><strong>而组件的生命周期一半可以分为三个状态</strong><br>Mounting: 已插入真实DOM<br>Updating: 正在被重新渲染<br>Unmounting: 已移除真实DOM</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[React 入门→虚拟DOM]]></title>
      <url>/blog/2016/11/01/react-%E5%85%A5%E9%97%A8%E2%86%92%E8%99%9A%E6%8B%9FDOM/</url>
      <content type="html"><![CDATA[<p>最近去面试好多家公司都在问你会React吗？刚开始都不知道这是什么鬼；回来脑补了一下：什么是React呢？原来React是Facebook开发的一款JS库; 百度上也有好多大神的介绍；就有一篇 <a href="http://www.jianshu.com/p/ae482813b791" target="_blank" rel="external">React</a>写的不错。</p>
<a id="more"></a>
<p>有两种方法可以引入Reacr：</p>
<ol>
<li>网上引入：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"https://npmcdn.com/react@15.3.1/dist/react.min.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;script src=<span class="string">"https://npmcdn.com/react-dom@15.3.1/dist/react-dom.min.js"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<ol>
<li>下载到本地：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install react --save</div><div class="line">$ npm install react-dom --save</div></pre></td></tr></table></figure>
<p>然后在：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//首先在终端安装：</span></div><div class="line">$ npm install -g browserify</div><div class="line"><span class="comment">//然后可以这样引入：</span></div><div class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react'</span>);</div><div class="line"><span class="keyword">var</span> ReactDOM = <span class="built_in">require</span>(<span class="string">'react-dom'</span>);</div><div class="line"></div><div class="line"><span class="comment">//或者用ES6的写法：</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div></pre></td></tr></table></figure>
<p>在开始写代码时我们得在说下用ES6编写程序，得看看现有环境是否支持；不支持得用转码器；而<a href="https://babeljs.io/" target="_blank" rel="external">Bable</a>是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行。这意味着，你可以现在就用ES6编写程序，而不用担心现有环境是否支持;<br>栗子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var f = () =&gt; 5;</div><div class="line">// 转码后：</div><div class="line">var f = function () &#123; return 5 &#125;;</div></pre></td></tr></table></figure>
<p>详细了解可以看阮一峰写的：<br><a href="http://www.ruanyifeng.com/blog/2016/01/babel.html" target="_blank" rel="external">Babel 入门教程</a></p>
<p>转码有了再来说说react用到的JSX语法糖，也是大神写的：<br><a href="http://www.jianshu.com/p/7e872afeae42" target="_blank" rel="external">React基础——JSX语法</a></p>
<p>react有些规范比如：渲染HTML标签，声明变量采用<strong>首字母小写</strong>，渲染React组件，声明变量采用<strong>首字母大写</strong>。<br>首先Html大概这样:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>react<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"foot"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后我们来看一段简单代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">"./scripts/libs/App.js"</span>;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>,</div><div class="line">  <span class="built_in">document</span>.querySelector( <span class="string">'#foot'</span> )</div><div class="line">);</div></pre></td></tr></table></figure>
<p>上面是引入一个子组件App.js，然后插入到<code>&lt;div id=&quot;foot&quot;&gt;&lt;/div&gt;</code>里面</p>
<p>再来看一个简单组件App代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line"><span class="comment">//export default 暴露一个 类名叫 App 的实例 extends 继承 React.Component 的方法</span></div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>( props )&#123;<span class="comment">//构造函数的方法，初始化count的值</span></div><div class="line">    <span class="keyword">super</span>( props );</div><div class="line">    <span class="keyword">this</span>.state = &#123; count: <span class="number">0</span>, data: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ] &#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  update()&#123;<span class="comment">//创建一个方法，来使用setState()方法改变当前状态的值</span></div><div class="line">    <span class="keyword">let</span> state = <span class="keyword">this</span>.state;</div><div class="line"></div><div class="line">    state.data.splice( <span class="number">1</span>, <span class="number">1</span> );<span class="comment">//删除data数组2</span></div><div class="line"></div><div class="line">    <span class="keyword">this</span>.setState( state );<span class="comment">//删完后再还给data</span></div><div class="line"></div><div class="line">    <span class="keyword">this</span>.setState(&#123;</div><div class="line">      count: ++ <span class="keyword">this</span>.state.count<span class="comment">//改变count的值</span></div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>//react组件必须有且只有一个父级元素</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">this.update.bind</span>( <span class="attr">this</span> ) &#125;&gt;</span>点我<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>//注册点击事件绑定h1</div><div class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123; this.state.count &#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">          &#123; this.state.data.map( item =&gt; <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123; item &#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span> ) &#125;//遍历data创建3个li</div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码运行起来count值会累加上去，li会减到1个;</p>
<h2 id="这里主要讲的也是react的实现→虚拟DOM"><a href="#这里主要讲的也是react的实现→虚拟DOM" class="headerlink" title="这里主要讲的也是react的实现→虚拟DOM"></a>这里主要讲的也是react的实现→虚拟DOM</h2><p>react的虚拟DOM（virtual DOM)就是数据发生变化就会生成新的虚拟DOM树，存在于内存之中的一种数据结构，然后React对着虚拟DOM进行操作，然后再将实际发生变动的部分反应给真实DOM渲染，然而每次数据放生变化时虚拟DOM就会和之前创建的虚拟DOM进行比较，如有地方发生改变就会在生成一个最新的虚拟DOM，然后把最后结果给真实DOM渲染出来；怎么理解呢，就是上面的栗子，点击时，3个li会变2个,在点击时会在变成一个；</p>
<p>明面上就是：</p>
<p><img src="http://uxhzz.com/images/DOM解说-1.png" alt=""><br>对应节点变化：<br><img src="http://uxhzz.com/images/DOM解说-2.png" alt=""><br><strong>实际React每次删除的都是最后一个li</strong><br>因为我们第一次渲染时是：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;<span class="name">li</span>&gt;</span>      但是当点击“点我”后  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;<span class="name">li</span>&gt;</span>   然后跟现实DOM   <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;<span class="name">li</span>&gt;</span>      虚拟DOM就会变成    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;<span class="name">li</span>&gt;</span>   的所有li在对比   <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;<span class="name">li</span>&gt;</span>                                                  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;<span class="name">li</span>&gt;</span></div></pre></td></tr></table></figure>
<p>发现第一个<code>&lt;li&gt;1&lt;li&gt;</code>没有变化不修改，第二个<code>&lt;li&gt;2&lt;li&gt;</code>变了要变成<code>&lt;li&gt;3&lt;li&gt;</code>,第三个<code>&lt;li&gt;3&lt;li&gt;</code>虚拟DOM是没有的，那么是要删除的;所以最后render()时就会把<code>&lt;li&gt;2&lt;li&gt;</code>变了要变成<code>&lt;li&gt;3&lt;li&gt;</code>,把<code>&lt;li&gt;3&lt;li&gt;</code>删除;</p>
<p>怎么证明呢？<br>其实很简单，就是打开控制台，选中Elements的<code>&lt;li&gt;1&lt;li&gt;</code>节点,这时你在Comsole这边 <code>$0</code> 所选中就是 <code>&lt;li&gt;1&lt;li&gt;</code>这节点，然后它添加一个 <code>$0.xx = &#39;a&#39;</code>,然后依次选中<code>&lt;li&gt;2&lt;li&gt;</code>和<code>&lt;li&gt;3&lt;li&gt;</code>添加<code>$0.xx = &#39;a&#39;``$0.xx = &#39;c&#39;</code>,最后你点击“点我”去掉一个li剩下<code>&lt;li&gt;1&lt;li&gt;</code>和<code>&lt;li&gt;3&lt;li&gt;</code>时，这时你在选中<code>&lt;li&gt;3&lt;li&gt;</code>查看<code>$0.xx</code>。然后你会<strong>发现<code>$0.xx</code>竟然等于’b’</strong>,说明运行了代码把<code>&lt;li&gt;2&lt;li&gt;</code>改成<code>&lt;li&gt;3&lt;li&gt;</code>,把<code>&lt;li&gt;3&lt;li&gt;</code>删除了;<br><img src="http://uxhzz.com/images/DOM解说-3.png" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[系统创建可执行的全局命令]]></title>
      <url>/blog/2016/10/31/%E7%B3%BB%E7%BB%9F%E5%88%9B%E5%BB%BA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E5%85%A8%E5%B1%80%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<h1 id="来-我们先来谈一下需求"><a href="#来-我们先来谈一下需求" class="headerlink" title="来~我们先来谈一下需求:"></a>来~我们先来谈一下需求:</h1><p>当你在终端输入一个命令时；会执行后打印结果；<br><a id="more"></a></p>
<p>首先打开你的iTerm终端或者你电脑自带的终端，然后输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ echo 1 2 3     // 1 2 3</div><div class="line">$ whereis echo   // /bin/echo  查看echo在哪里</div><div class="line">$ pwd            // /Users/locozan 你当前用户</div></pre></td></tr></table></figure>
<p>说明你电脑有echo这命令，并且echo是在你的脚本文件夹bin下面。<br>然后你在输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ echo $PATH     // /usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Users/locozan/bin</div></pre></td></tr></table></figure>
<p>说明你每输入一个命令终端都会去以下六个文件夹查找：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1.  /usr/local/bin</div><div class="line">2.  /usr/bin</div><div class="line">3.  /bin</div><div class="line">4.  /usr/sbin</div><div class="line">5.  /sbin</div><div class="line">6.  /Users/locozan/bin</div></pre></td></tr></table></figure>
<p> 有就会执行，没有就会打印：命令没有找到</p>
<h2 id="那我们来创建一个这样的指令"><a href="#那我们来创建一个这样的指令" class="headerlink" title="那我们来创建一个这样的指令"></a>那我们来创建一个这样的指令</h2><p>在你的用户名下（我的是locozan）下创建一个bin文件夹，然后创建一个文件（我创建了locozan），然后打开显示简介把里面的执行都勾亮；这样你的这个文件就是一个可执行文件，这样才有权限。再来就是对该文件进行编辑；（由于本人用的是Sublime，所以习惯用Sublime来编写）。<br>文件夹里可粘贴以下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/usr/bin/env node //我使用的的是node；所以指定以node打开；</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> lastArgv = process.argv[ process.argv.length - <span class="number">1</span> ];</div><div class="line"></div><div class="line"><span class="keyword">if</span>( lastArgv === <span class="string">'--help'</span> )&#123;</div><div class="line">  <span class="built_in">console</span>.log( <span class="string">'help'</span> );</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log( <span class="string">'hello'</span> );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后去你的根目录下， 并显示所有隐藏文件，有用Zsh的是找到.zshrc。不然系统自带的终端是找到.bash_profile，然后在最后面添加 一条： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PATH=&quot;$PATH:/Users/locozan/bin&quot;</div></pre></td></tr></table></figure>
<p>上面这句话上面意思呢；就是添加一个/Users/locozan/bin 加上 \$PATH(原有的文件夹)；<br>你也可以在终端输入 PATH=”\$PATH:/Users/locozan/bin<br>然后在终端 \$ echo \$PATH  查看添加上这个文件夹了没；<br>最后就可以：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ locozan         // hello</div><div class="line">$ locozan --help  // help</div></pre></td></tr></table></figure>
<p>所以一般当我们输入一条指令时的时候系统会去之前说的六个文件夹下查找，然后执行打印结果。而文件执行时文件里的第一条,也就是开头第一行一般指定脚本的解释程序，我用node来解释执行；然后系统运行node执行文件打印结果。</p>
<p>这里涉及linux的bash脚本这里有篇大神文章可以看看<br><a href="http://selfcontroller.iteye.com/blog/2012385" target="_blank" rel="external">http://selfcontroller.iteye.com/blog/2012385</a><br>还有就是阮一峰也有篇Node.js 命令行程序开发教程也不错<br><a href="http://www.ruanyifeng.com/blog/2015/05/command-line-with-node.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/05/command-line-with-node.html</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[有趣的流氓:getBoundingClientRect()]]></title>
      <url>/blog/2016/09/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E6%B5%81%E6%B0%93-getBoundingClientRect/</url>
      <content type="html"><![CDATA[<p>一次意外的使用发现<strong>getBoundingClientRect()</strong>的另一个强大功能，而不是简单地取坐标；</p>
<a id="more"></a>
<h3 id="JavaScript中getBoundingClientRect-方法详解"><a href="#JavaScript中getBoundingClientRect-方法详解" class="headerlink" title="JavaScript中getBoundingClientRect()方法详解"></a>JavaScript中getBoundingClientRect()方法详解</h3><figure class="highlight plain"><figcaption><span>box=document.getElementById('box');</span><a href="//">获取元素</a></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">alert(box.getBoundingClientRect().top);         // 元素上边距离页面上边的距离</div><div class="line"></div><div class="line">alert(box.getBoundingClientRect().right);       // 元素右边距离页面左边的距离</div><div class="line"></div><div class="line">alert(box.getBoundingClientRect().bottom);      // 元素下边距离页面上边的距离</div><div class="line"></div><div class="line">alert(box.getBoundingClientRect().left);        // 元素左边距离页面左边的距离</div></pre></td></tr></table></figure>
<blockquote>
<p>这个方法返回一个矩形对象，包含四个属性：left、top、right和bottom。分别表示元素各边与页面上边和左边的距离。</p>
</blockquote>
<p>如果你想看它在浏览器的支持程度：<br>src = <a href="http://caniuse.com/#search=getBoundingClientRect(" target="_blank" rel="external">http://caniuse.com/#search=getBoundingClientRect(</a>)</p>
<p>好了重点来：</p>
<p>首先你先定义一个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;box&quot;&gt;&lt;div&gt;</div></pre></td></tr></table></figure></p>
<p>然后css样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">*&#123;</div><div class="line">    <span class="attribute">transition</span>: all ease <span class="number">2s</span>;</div><div class="line"> &#125;</div><div class="line"><span class="selector-id">#box</span>&#123;</div><div class="line">     <span class="attribute">position</span>: absolute;</div><div class="line">     <span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">     <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">     <span class="attribute">left</span>: <span class="number">0px</span>;</div><div class="line">     <span class="attribute">top</span>: <span class="number">0px</span>;</div><div class="line">     <span class="attribute">background</span>: <span class="number">#49C21E</span>;</div><div class="line">     <span class="attribute">display</span>: none;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后来个简单的注册事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">  <span class="keyword">var</span> box = <span class="built_in">document</span>.querySelector( <span class="string">'#box'</span> );</div><div class="line">  </div><div class="line">      box.style.left = <span class="number">0</span> + <span class="string">'px'</span>;</div><div class="line">      </div><div class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">  </div><div class="line">    box.style.display = <span class="string">'block'</span></div><div class="line">    box.style.left = <span class="number">1000</span> + <span class="string">'px'</span>;</div><div class="line">    </div><div class="line">  &#125;, <span class="literal">false</span>);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>运行上面代码方块<strong>box</strong>会直接出现在1000px的位置，因为js解析完直接把结果交给浏览器显示出来，所以你看到的只是执行完的结果。</p>
<p>老一辈的大神一般会用个setTimeout() 方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">setTimeout( <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">   box.style.left = <span class="number">1000</span> + <span class="string">'px'</span>;</div><div class="line">&#125;, <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>这样就有动画效果：<strong>box</strong>会显示然后飘到1000px的位置，代码的执行就变成先display=”block” <strong>-&gt;</strong> 在style.left.</p>
<p>因为javascript提供了setTimeout() 方法用于在指定的毫秒数后调用函数或计算表达式;</p>
<p>这样写的话，setTimeout内部代码会变成异步的。</p>
<h3 id="然而不用setTimeout-的话："><a href="#然而不用setTimeout-的话：" class="headerlink" title="然而不用setTimeout()的话："></a>然而不用setTimeout()的话：</h3><p>直接加一条无关的<strong>box.getBoundingClientRect();</strong><br>变成：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">box.style.display = <span class="string">'block'</span></div><div class="line"><span class="keyword">var</span> a = box.getBoundingClientRect();</div><div class="line">box.style.left = <span class="number">1000</span> + <span class="string">'px'</span>;</div></pre></td></tr></table></figure>
<p>然后执行出来也是有动画的跟setTimeout()效果是一样的,<br>因为getBoundingClientRect()会去获取元素个边与的距离，所以会强行的执行代码先渲染出来，然后获取完距离在继续执行下面的代码。所以运行就变成 先display=”block”，然后在到页面渲染出来，在获取<strong>box</strong>坐标，在在style.left;</p>
<p>而这一类在IE \ Safari \ Chrome -&gt; 效果都是一样的;</p>
<p>还有像这类效果比如<strong>clientHeight,clientWidth</strong>也是有这类效果；<br>也有个大神文章写到<br><a href="http://jinlong.github.io/2015/09/30/what-forces-layout-reflow/" target="_blank" rel="external">http://jinlong.github.io/2015/09/30/what-forces-layout-reflow/</a></p>
<h3 id="如不对大神请勿喷。。。。"><a href="#如不对大神请勿喷。。。。" class="headerlink" title="如不对大神请勿喷。。。。"></a>如不对大神请勿喷。。。。</h3>]]></content>
    </entry>
    
  
  
</search>
